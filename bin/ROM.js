window.ROM=function(){return{}}();ROM.digest=function(){var h=!1,g=[],c=[],b=function(){if(!h){h=!0;for(var b=10,a=0;a<g.length;a+=1){try{g[a]()}catch(k){(console.error||console.log)(k)}if(!b--)throw"10 digest iterations reached";}g=[];for(a=0;a<c.length;a+=1)try{c[a]()}catch(r){(console.error||console.log)(r)}c=[];h=!1}};b.queue=function(b){"function"===typeof b&&g.push(b)};b.queuePostDigest=function(b){"function"===typeof b&&c.push(b)};return b}();ROM.apply=function(){return function(h){ROM.digest.queue(h);ROM.digest()}}();ROM.applyAsync=function(){return function(h){setTimeout(function(){ROM.digest()},0);ROM.digest.queue(h)}}();window.ROM.selector=function(){return{Selector:function(h,g,c,b,e,a){h=h||"";g=g||null;c=c||null;b=b||[];e=e||{};a=!!a;var k=b.join(" "),r=Object.keys(e),s=function(b){var c=b.getElementsByTagName(g),f=function(a){return a.parentElement===b};return a?m(c,f):n(c)},t=function(b){var d=document.getElementById(c),f;if(!(f=null===d)){a:if(f=d,b===document)f=!0;else{for(;null!==f.parentElement;){if(f.parentElement===b){f=!0;break a}f=f.parentElement}f=!1}f=!f}return f?[]:a&&d.parentElement!==b?[]:[d]},
q=function(b){var c=b.getElementsByClassName(k),f=function(a){return a.parentElement===b};return a?m(c,f):n(c)},u=function(b){var c=n(v(b)||b.childNodes);a||function w(a){c=c.concat(a);a=v(a);for(var b=0;b<a.length;b+=1)w(a[b])}(b);return l(b,c)},d=function(a,b){var c=g.toUpperCase();return m(b,function(a){return a.tagName===c})},p=function(a,c){return m(c,function(a){for(var c=0;c<b.length;c+=1)if(!a.classList.contains(b[c]))return!1;return!0})},l=function(a,b){return m(b,function(a){for(var b=0;b<
r.length;b+=1){var c=r[b],d=e[c];if(!a.hasAttribute||!a.hasAttribute(c)||!d(a.getAttribute(c)))return!1}return!0})},m=function(a,b){for(var c=[],d=0;d<a.length;d+=1)b(a[d],d)&&c.push(a[d]);return c},n=function(a){return Array.prototype.slice.call(a,0)},v=function(a){var b=function(a){return 1===a.nodeType};return a.children||m(a.childNodes,b)};this.match=function(a){var e,f=[t,s,q,u];e=null!==c?0:null!==g?1:0!==b.length?2:3;f=f[e](a);1>e&&null!==g&&(f=d(a,f));2>e&&0!==b.length&&(f=p(a,f));3>e&&0!==
r.length&&(f=l(a,f));return f};this.selectorString=h;return this}}}();window.ROM.selector.SelectorTree=function(){this.addSelector=function(h){}};window.ROM.selector.tree=new ROM.selector.SelectorTree;window.ROM.selector.attributes=function(){var h={getMatchFunction:function(c,b){var e=h.attr[c]||function(){return!1};b=b.toLowerCase();return function(a){return e(b,a)}},attr:{"=":function(c,b){return c===b},"~=":function(c,b){for(var e=g(c),a=g(b),k=0;k<e.length;k+=1)if(-1===a.indexOf(e[k]))return!1;return!0},"|=":function(c,b){for(var e=g(c),a=g(b),k=0;k<e.length;k+=1)if(a[k]!==e[k])return!1;return!0},"^=":function(c,b){return 0===b.indexOf(c)},"$=":function(c,b){return-1!==b.indexOf(c,b.length-
c.length)},"*=":function(c,b){return-1!==b.indexOf(c)},exists:function(){return!0}}},g=function(c){c=c.split(" ");for(var b=[],e=[],a=0;a<c.length;a+=1)b=b.concat(c[a].split("-"));for(a=0;a<b.length;a+=1)""!==b[a]&&e.push(b[a]);return e};return h}();window.ROM.selector.parseString=function(){var h=function(c,b,e){for(var a,k,h,s=[],t={},q=[],u=[];b[0]<c.length;){a=c[b[0]];if(-1!==" \t\r\n".indexOf(a)||">"===a)break;switch(a){case ".":a=c;var d=b;d[0]+=1;a=g(a,d).toLowerCase();s.push(a);q.push("."+a);break;case "#":h=c;a=b;a[0]+=1;h=g(h,a);break;case "[":a=c;var d=b,p={};d[0]+=1;p.name=g(a,d);var l=a[d[0]],m=void 0,n=void 0;if("]"===l)p.matchFn=ROM.selector.attributes.getMatchFunction("exists"),d[0]+=1;else{"="===l?m="=":(d[0]+=1,l+=a[d[0]],m=
-1!==Object.keys(ROM.selector.attributes.attr).indexOf(l)?l:"exists");d[0]+=1;l=a[d[0]];if('"'===l){d[0]+=1;for(n=d[0];d[0]<a.length&&(l=a[d[0]],'"'!==l);)d[0]+=1;n=a.substring(n,d[0]);d[0]+=1}else n=g(a,d);d[0]+=1;p.matchType=m;p.matchValue=n;p.matchFn=ROM.selector.attributes.getMatchFunction(m,p.matchValue)}a=p;t[a.name]=a.matchFn;u.push(["[",a.name,a.matchType,'"',a.matchValue,'"]'].join(""));break;default:k=g(c,b)}}c=ROM.selector.Selector;b=h;a=[];k&&a.push(k.toUpperCase());b&&a.push("#",b.toLowerCase());
a=a.concat(q.sort());a=a.concat(u.sort());q=a.join("");return new c(q,k,h,s,t,e)},g=function(c,b){for(var e=b[0],a;b[0]<c.length;){a=c[b[0]];if(-1!=='#.[]~|^$*=">'.indexOf(a)||-1!==" \t\r\n".indexOf(a))break;b[0]+=1}return c.substring(e,b[0])};return function(c){for(var b=[0],e,a=!1,g=[];b[0]<c.length;){e=c[b[0]];if(-1!==" \t\r\n".indexOf(e))b[0]+=1;else if(">"===e){a=!0;b[0]+=1;continue}else g.push(h(c,b,a));a=!1}return g}}();
